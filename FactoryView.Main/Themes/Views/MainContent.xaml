<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:views="clr-namespace:FactoryView.Main.UI.Views">

    <!-- FormName에 따라 View를 선택하는 DataTemplateSelector 대신 ContentControl + Trigger 사용 -->
    <DataTemplate x:Key="DashboardTemplate">
        <Grid Background="#F5F5F5">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <TextBlock Text="Dashboard"
                           FontSize="32"
                           FontWeight="Bold"
                           Foreground="#1F303A"
                           HorizontalAlignment="Center"/>
                <TextBlock Text="Welcome to FactoryView"
                           FontSize="14"
                           Foreground="#666666"
                           Margin="0,10,0,0"
                           HorizontalAlignment="Center"/>
            </StackPanel>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="MaterialPurchaseOrderTemplate">
        <views:MaterialPurchaseOrderView/>
    </DataTemplate>

    <DataTemplate x:Key="DefaultFormTemplate">
        <Grid Background="#F5F5F5">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <TextBlock Text="{Binding Header}"
                           FontSize="32"
                           FontWeight="Bold"
                           Foreground="#1F303A"
                           HorizontalAlignment="Center"/>
                <TextBlock Text="{Binding FormName, StringFormat='Form: {0}'}"
                           FontSize="14"
                           Foreground="#666666"
                           Margin="0,10,0,0"
                           HorizontalAlignment="Center"/>
            </StackPanel>
        </Grid>
    </DataTemplate>

    <Style TargetType="{x:Type views:MainContents}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type views:MainContents}">
                    <Border Background="#F0F0F0">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TabControl Grid.Row="0" Background="White"
                                        ItemsSource="{Binding Tabs}"
                                        SelectedItem="{Binding SelectedTab}">
                                <TabControl.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="{Binding Header}" VerticalAlignment="Center"/>
                                            <Button Content="X"
                                                    Background="Transparent"
                                                    BorderThickness="0"
                                                    FontSize="10"
                                                    Margin="8,0,0,0"
                                                    Cursor="Hand"
                                                    Command="{Binding DataContext.CloseTabCommand, RelativeSource={RelativeSource AncestorType=TabControl}}"
                                                    CommandParameter="{Binding FormName}"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </TabControl.ItemTemplate>
                                <TabControl.ContentTemplate>
                                    <DataTemplate>
                                        <ContentControl x:Name="formContent"
                                                        Content="{Binding}"
                                                        ContentTemplate="{StaticResource DefaultFormTemplate}"/>
                                        <DataTemplate.Triggers>
                                            <DataTrigger Binding="{Binding FormName}" Value="Dashboard">
                                                <Setter TargetName="formContent" Property="ContentTemplate"
                                                        Value="{StaticResource DashboardTemplate}"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding FormName}" Value="MaterialPurchaseOrder">
                                                <Setter TargetName="formContent" Property="ContentTemplate"
                                                        Value="{StaticResource MaterialPurchaseOrderTemplate}"/>
                                            </DataTrigger>
                                        </DataTemplate.Triggers>
                                    </DataTemplate>
                                </TabControl.ContentTemplate>
                            </TabControl>

                            <Border Grid.Row="1" Background="#E0E0E0" Height="30">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="5,0">
                                    <TextBlock Text="Tabs: " Foreground="#666666" VerticalAlignment="Center"/>
                                    <TextBlock Text="{Binding Tabs.Count}" Foreground="#666666" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>
